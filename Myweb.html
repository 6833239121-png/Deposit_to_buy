<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠</title>
  <style>
    body {
    background: linear-gradient(to right, #aec8da, #d6bace); 
    font-family: "Tahoma", sans-serif;
    margin: 0;
    padding: 0;
}
table {
    width: 80%;
    margin: 20px auto;
    border-collapse: collapse;
    background-color: #ffffff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-radius: 10px;
    overflow: hidden;
}

th {
    background-color: #5d9ce4; /* ‡∏™‡∏µ‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
    color: white;
    padding: 10px;
    text-align: center;
}

td {
    background-color: #f9f9f9; /* ‡∏™‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #ddd;
}

tr:nth-child(even) td {
    background-color: #f1f7ff; /* ‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏µ‡πÅ‡∏ñ‡∏ß‡∏Ñ‡∏π‡πà */
}

tr:hover td {
    background-color: #e0f0ff; /* ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÑ‡∏õ‡∏ß‡∏≤‡∏á */
}


    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    table {
      border-collapse: collapse;
      margin: auto;
      width: 90%;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 5px 10px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
    
  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
  <div id="homePage" class="container">
    <div>
        <img src="D:\comm\web\picture.JFIF" width="300" height = "400">
      <h1>üì¶ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠ üì¶</h1>
      <p>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠</p>
      <button id="goToDeposit">‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠</button>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠ -->
  <div id="depositPage" class="hidden">
    <h2>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ù‡∏≤‡∏Å‡∏ã‡∏∑‡πâ‡∏≠ üìã</h2>
    <button id="backHome">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    <button id="addColumnBtn">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</button>
    <button id="removeColumnBtn">‚ûñ ‡∏•‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</button>
    <br><br>

    <table id="depositTable">
      <thead>
        <tr>
          <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
          <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          <th>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td><input type="text" placeholder="‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></td>
          <td><input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠"></td>
          <td><input type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤"></td>
          <td>
            <select>
              <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢</option>
              <option value="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß">‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option>
            </select>
          </td>
          <td><button id="addBtn">‡πÄ‡∏û‡∏¥‡πà‡∏°</button></td>
        </tr>
      </tfoot>
    </table>

    <h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</h3>
    <div id="totalsByName"></div>
    <h3 id="totalAll">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0 ‡∏ö‡∏≤‡∏ó</h3>
  </div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const homePage = document.getElementById("homePage");
  const depositPage = document.getElementById("depositPage");
  const goToDepositBtn = document.getElementById("goToDeposit");
  const backHomeBtn = document.getElementById("backHome");

  const depositTable = document.getElementById("depositTable");
  const tableBody = depositTable.querySelector("tbody");
  const addBtn = document.getElementById("addBtn");

  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
  goToDepositBtn.addEventListener("click", () => {
    homePage.classList.add("hidden");
    depositPage.classList.remove("hidden");
  });
  backHomeBtn.addEventListener("click", () => {
    depositPage.classList.add("hidden");
    homePage.classList.remove("hidden");
  });

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö
  function addDeleteHandler(button) {
    button.addEventListener("click", function () {
      if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        button.closest("tr").remove();
        updateTotals();
      }
    });
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  function addEditHandler(button) {
    button.addEventListener("click", function () {
      const row = button.closest("tr");
      const cells = row.querySelectorAll("td");

      if (button.textContent === "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç") {
        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        cells.forEach((cell, i) => {
          if (i < cells.length - 1) { 
            let value = cell.textContent.trim();
            if (cell.querySelector("select")) {
              let current = cell.querySelector("select").value;
              cell.innerHTML = `
                <select>
                  <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"${current==="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"?' selected':''}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢</option>
                  <option value="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"${current==="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"?' selected':''}>‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option>
                </select>`;
            } else {
              cell.innerHTML = `<input type="text" value="${value}">`;
            }
          }
        });
        button.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å";
      } else {
        // ‡πÄ‡∏ã‡∏ü‡∏Ñ‡πà‡∏≤
        cells.forEach((cell, i) => {
          if (i < cells.length - 1) {
            if (cell.querySelector("input")) {
              cell.textContent = cell.querySelector("input").value;
            } else if (cell.querySelector("select")) {
              let sel = cell.querySelector("select").value;
              cell.innerHTML = `
                <select>
                  <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"${sel==="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"?' selected':''}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢</option>
                  <option value="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"${sel==="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"?' selected':''}>‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option>
                </select>`;
            }
          }
        });
        button.textContent = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç";
        updateTotals();
      }
    });
  }

  // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß
  addBtn.addEventListener("click", function () {
    const headerCells = depositTable.querySelectorAll("thead th");
    const footerInputs = depositTable.querySelectorAll("tfoot input, tfoot select");
    const newRow = document.createElement("tr");

    let emptyCheck = false;

    headerCells.forEach((th, index) => {
      let td = document.createElement("td");

      if (th.textContent === "‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£") {
        td.innerHTML = `<button>‡∏•‡∏ö</button><button>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>`;
        addDeleteHandler(td.querySelector("button:first-child"));
        addEditHandler(td.querySelector("button:last-child"));
      } else {
        let input = footerInputs[index];
        if (input) {
          let value = input.value.trim();
          if (!value) emptyCheck = true;

          if (input.tagName.toLowerCase() === "select") {
            td.innerHTML = `
              <select>
                <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"${value==="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢"?' selected':''}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢</option>
                <option value="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"${value==="‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß"?' selected':''}>‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option>
              </select>`;
          } else {
            td.textContent = value;
          }
        }
      }
      newRow.appendChild(td);
    });

    if (emptyCheck) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
      return;
    }

    tableBody.appendChild(newRow);
    footerInputs.forEach(input => input.value = "");
    updateTotals();
  });

  // ‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î
  function updateTotals() {
    const rows = tableBody.querySelectorAll("tr");
    const totals = {};
    const paidTotals = {};
    const unpaidTotals = {};
    let totalAll = 0;

    rows.forEach(row => {
      const name = row.cells[1]?.textContent.trim();
      const price = parseFloat(row.cells[2]?.textContent);
      const status = row.cells[3]?.querySelector("select")?.value;

      if (!name || isNaN(price)) return;

      if (!totals[name]) {
        totals[name] = 0;
        paidTotals[name] = 0;
        unpaidTotals[name] = 0;
      }

      totals[name] += price;
      totalAll += price;

      if (status === "‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß") paidTotals[name] += price;
      else unpaidTotals[name] += price;
    });

    let html = "<table><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ö‡∏≤‡∏ó)</th><th>‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏ö‡∏≤‡∏ó)</th><th>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</th></tr>";
    for (let name in totals) {
      html += `<tr>
                  <td>${name}</td>
                  <td>${totals[name].toFixed(2)}</td>
                  <td>${paidTotals[name].toFixed(2)}</td>
                  <td>${unpaidTotals[name].toFixed(2)}</td>
               </tr>`;
    }
    html += "</table>";

    document.getElementById("totalsByName").innerHTML = html;
    document.getElementById("totalAll").textContent = "‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: " + totalAll.toFixed(2) + " ‡∏ö‡∏≤‡∏ó";
  }

  // ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå
  document.getElementById("addColumnBtn").addEventListener("click", function () {
    const colName = prompt("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà:");
    if (!colName) return;

    const headerRow = depositTable.querySelector("thead tr");
    const th = document.createElement("th");
    th.textContent = colName;
    headerRow.insertBefore(th, headerRow.lastElementChild);

    depositTable.querySelectorAll("tbody tr, tfoot tr").forEach(row => {
      const td = document.createElement("td");
      td.innerHTML = `<input type="text" placeholder="${colName}">`;
      row.insertBefore(td, row.lastElementChild);
    });
  });

  document.getElementById("removeColumnBtn").addEventListener("click", function () {
    const headerRow = depositTable.querySelector("thead tr");
    if (headerRow.children.length <= 2) {
      alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
      return;
    }
    const indexToRemove = headerRow.children.length - 2;
    headerRow.deleteCell(indexToRemove);
    depositTable.querySelectorAll("tbody tr, tfoot tr").forEach(row => {
      if (row.cells[indexToRemove]) row.deleteCell(indexToRemove);
    });
  });
});
</script>
</body>
</html>
